# The Place ¦ ブログのWebアプリケーション

Next.JSフレームワークを使用したブログのWebアプリケーションで、フロントエンドにはReact、バックエンドにはTypescript Expressを使用しています。The Placeは現在、クラウドで実行するために3つの異なるクラウドサービスを使用しています: 画像のホスティングとアクセスにはCloudinary、クラウドデータベースのホスティングにはRender、バックエンドとフロントエンドを別々に実行するために2つのAWS EC2を使用しています。

## インストール

まず、現在のリポジトリをクローンして開始します。

```bash
git clone https://github.com/IRekik/the-place.git
```

### フロントエンド

ルートリポジトリから`front-end`ディレクトリに移動します。

```bash
cd front-end
```

依存関係をインストールします。

```bash
npm install
```

プロジェクトをビルドします。

```bash
npm run build
```

### バックエンド

ルートリポジトリから`back-end`ディレクトリに移動します。

```bash
cd back-end
```

依存関係をインストールします。

```bash
npm install
```

プロジェクトをビルドします。

```bash
npm run build
```

## 開始する

このセクションでは、プロジェクトをローカルで実行する方法について説明します。 プロジェクトの実行にはパッケージマネージャ`npm`が使用されます。

### フロントエンド

フロントエンドを実行します。

```bash
npm run dev
```

ブラウザ[http://localhost:3000](http://localhost:3000)を開くと、結果が表示されます。 フロントエンドはポート3000で実行されています。 すでに使用している場合は、フロントエンドを実行できませんのでご注意ください。

### バックエンド

開発サーバーを実行します。

```bash
npm start
```

サーバーはローカルで`http://localhost:3001`で実行されます。 バックエンドはポート3001で実行されています。 すでに使用している場合は、フロントエンドを実行できませんのでご注意ください。

## デプロイメント

プロジェクトの現在のデプロイメント戦略は、フロントエンドとバックエンドの両方について、AWS EC2クラウドプラットフォームを使用しています。Webアプリケーションをホストするために利用可能な複数の選択肢の中で、EC2とVercelの2つのオプションがより適していると考えられました。VercelはNext.jsの開発者が提供するクラウドサービスであり、Next.jsアプリケーションとの統合がスムーズです。ただし、VercelはプラットフォームでのHTTPSの使用を強制しています。したがって、プロジェクトにまだドメイン名がないことから、HTTPをデフォルトのオプションとしていること、およびプレプロダクション開発を容易にするために、EC2へのデプロイをVercelよりも優先しました。 AWS EC2は構成の柔軟性と制御が高いため、プロダクションレベルの開発の前に優れたオプションです。以下では、EC2にデプロイする1つの方法を説明します。

### EC2インスタンスを2つ作成する

プロジェクトの一般的な構造に従って、フロントエンドとバックエンドは別々のエンティティとして扱われ、別々にホストされます。そのため、バックエンド用の1つとフロントエンド用の1つのインスタンスを作成することをお勧めします。各インスタンスでは、リクエストに使用されるポートを有効にする必要があります。この場合、フロントエンドにはポート3000を、バックエンドにはポート3001を有効にする必要があります。最後に、インスタンスを起動して接続を開く必要があります。また、各インスタンスに対してElastic IPを構成することをお勧めします。これにより、静的IPアドレスを保持し、サーバーアクセスを簡素化できます。

### プロジェクトのセットアップと実行

EC2インスタンスとの接続が確立されると、ソースコードを各インスタンスにインストールする必要があります。インストール手順は、詳細について`インストール`セクションで説明されています。インストールが完了すると、各EC2がサブプロジェクトを実行できるようになります。サブプロジェクトを実行するには、`開始する`で`npm`を使用して実行する方法が説明されています。各EC2はプロジェクトの一部しか実行しません。現在のセットアップは、プロジェクトがサイズやトラフィックで成長するとよりスケーラブルになるように設計されています。また、SSHセッションを閉じた後もプロジェクトを長時間実行する場合は、Linux上でコマンドを`screen` で実行してSSHセッションからの実行を切り離すことをお勧めします。

### ウェブサイトへのアクセス

両方のインスタンスがそれぞれのサブプロジェクトを実行していると、ウェブサイトにアクセスできます。フロントエンドのEC2 IPアドレスを入力し、フロントエンドが実行されているポートに続けば、ウェブサイトにアクセスできます。リンクは次のようになります。

```
http://x.xx.xxx.xx:xxxx/
```

## 機能とデザイン

### ホームページとレイアウト

ホームページはユーザーがWebアプリケーションにアクセスしたときに表示されるウェルカムページです。 ヒーローセクションにはウェブサイトに関する情報が表示されます: スレッドの数、コメントの数、ユーザーの数。下部セクションは現在のすべてのブログ投稿を表示するために指定されており、ボタンをクリックすることで3つずつ読み込まれます。 レイアウトにはホームページにアクセスするためのナビゲーションバーがあり、フッターは美的な目的でのみ実装されています。

### スレッドの投稿（またはブログ投稿）

ホームページで「スレッドを投稿」をクリックすると、ウェブサイトは`http://localhost:3000/new-post`にリダイレクトされ、ユーザーはタイトルとコンテンツを入力してブログ投稿を作成できます。タイトルはシンプルなテキスト入力ボックスを使用し、コンテンツはリッチテキストエディタ`QuillEditor`を介して入力され、斜体、太字、下線付きテキストなどをサポートするHTML形式のテキストを可能にします。リッチテキストエディタは画像もサポートしています。ユーザーは画像をアップロードし、コピーが`Cloudinary` クラウドサービスを使用してクラウド上にホストされます。 リッチテキストエディタは同時にテキストコンテンツと画像コンテンツの両方をサポートできます。

### スレッドの表示

ホームページから個々の投稿をクリックするか、それらの個別のリンクを使用してアクセスできます。各スレッドは`http://localhost:3000/posts/[blog_id]`に配置され、`blog_id`はスレッドの作成時に割り当てられる一意のIDです。

### スレッドの編集

スレッドの表示ページでは、スレッドを編集することができます。省略符号内にある「編集」をクリックすると、新しいタイトルとテキストコンテンツを入力し、変更を送信できます。編集のタイムスタンプはスレッドの上部に含まれます。

### スレッドの削除

スレッドの表示ページでは、スレッドを削除することができます。「削除」をクリックすると、省略符号内にスレッドが削除されます。

## さらに詳しく

### 有益なリソース

- **Next.js ドキュメンテーション**: [Next.js ドキュメンテーション*](https://nextjs.org/docs)を探索し、機能、API リファレンス、およびベストプラクティスに関する詳細な情報を得てください。

- **TypeScript ハンドブック**: [TypeScript ハンドブック](https://www.typescriptlang.org/docs)にアクセスして、TypeScript およびその機能に関する知識を深めてください。

- **PostgreSQL ドキュメンテーション**: 公式の [PostgreSQL ドキュメンテーション](https://www.postgresql.org/docs/)を参照して、データベースのセットアップ、クエリ、最適化に関する包括的なガイドを得てください。

- **AWS EC2 ドキュメンテーション**: [AWS EC2 ドキュメンテーション](https://docs.aws.amazon.com/ec2/)を探索し、拡張可能な仮想マシンを使用したクラウドコンピューティングについて学んでください。

- **Render ドキュメンテーション**: [Render のドキュメンテーション](https://render.com/docs)で、ウェブアプリケーションとデータベースを簡単にデプロイおよびホストする方法に慣れてください。

- **Cloudinary ドキュメンテーション**: ウェブおよびモバイルアプリケーションでの効果的な画像およびビデオの管理に提供される Cloudinary の機能と統合を見つけるには、[Cloudinary ドキュメンテーション](https://cloudinary.com/documentation)を探索してください。

これらのリソースは、ウェブアプリケーションの継続的な学習と最適化のために参照してください。問題が発生した場合や提案がある場合は、[issue を開く](https://github.com/IRekik/the-place/issues)か [pull request を提出](https://github.com/IRekik/the-place/pulls)してください。

## ライセンス

このプロジェクトは MIT ライセンスの下で提供されています - 詳細については [LICENSE_JP.txt](LICENSE_JP.txt) ファイルを参照してください。